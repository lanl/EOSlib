#!/bin/sh

cdir=`pwd`
FullPath() {
	case "$1" in
	/*)
		echo $1;;
	*)
		echo $cdir/$1;;
	esac
}

lib=`FullPath $1`
shift
rm -f $lib

rm -fr /tmp/merge$$
mkdir /tmp/merge$$
cd /tmp/merge$$

for file
do
        f=`FullPath $file`
	if ( ar x $f )
	then
		chmod a-w *.*o
	else
		status=$?
		cd ..
		rm -rf /tmp/merge$$
		exit $status
	fi
done

chmod o+w *.*o
ar cru  $lib *.*o
rm -rf /tmp/merge$$
